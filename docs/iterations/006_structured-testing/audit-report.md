# Итерация 006 — Аудит данных Google Sheets

> Дата: 2026-02-11
> Источник: rus_pharma_field_advanced (Google Sheets export)

---

## 1. Структура Google Sheets

| Лист | Строк | Описание |
|------|-------|----------|
| Вопросы | 88 | Multiple choice вопросы |
| Препараты | ~1000 | Карточки препаратов |
| Сценарии | ~1000 | Интерактивные клинические сценарии |
| Компетенции | 10 | Справочник (в competencies-config.js — 26) |
| Группы | 1 | PHARMA-0126 |
| Курсанты | 2 | Игорь, Илья (PIN-авторизация) |
| Прогресс | 4 записи | JSON progress_matrix |
| Настройки | 7 параметров | Версия 2.0, таймеры тестов |
| СинхронизацияЛог | ~1738 | Лог синхронизации |

---

## 2. Вопросы: маппинг по модулям

### Распределение

| Модуль | Кол-во | Компетенция | Блок |
|--------|--------|-------------|------|
| 1 | 4 (+7 SB = 11) | BASE_PHARMA / PHARMACOLOGY_BASICS | I |
| 2 | 3 | ANTIBIOTICS | I |
| 3 | 3 | ANTIHISTAMINES | I |
| 4 | 3 | EYE_EAR_INFECTIONS | I |
| 5 | 3 | VIRAL_INFECTIONS | I |
| 6 | 4 | NSAID | I |
| 7 | 4 | GLUCOCORTICOIDS | II |
| 8 | 4 | ADRENALINE | II |
| 9 | 6 | SPASMOLITICA | II |
| 10 | 4 | HEMORRHAGIC_SHOCK | II |
| 11 | 5 | INFUSION_THERAPY | II |
| 12 | 5 | ANTIDOTES | II |
| 13 | 5 | ANALGESIA | II |
| 14 | 4 | SEPTIC_SHOCK | III |
| 15 | 4 | TICK_INFECTIONS | III |
| 16 | 4 | RABIES | III |
| 17 | 4 | CARDIAC_STROKE | III |
| 18 | 4 | DETOX | III |
| 19 | 4 | GUNSHOT_WOUNDS | IV |
| 20 | 4 | BURNS | IV |

### Вопросы без числового модуля (7 шт — все [SB])

Все 7 — компетенция PHARMACOLOGY_BASICS → назначаются в Модуль 1.

| ID (сокращённый) | Модуль в GSheets | Категория | Решение |
|------------------|-----------------|-----------|---------|
| 3047aa9d [SB] | (пусто) | — | → Модуль 1 |
| (другой) [SB] | (пусто) | — | → Модуль 1 |
| (3 шт) [SB] | ФАРМАКОЛОГИЧЕСКИЕ ОСНОВЫ | Взаимодействия/Метаболизм/Побочные | → Модуль 1 |
| (2 шт) [SB] | ФАРМАКОЛОГИЧЕСКИЕ ОСНОВЫ | Коррекция дозировок/Пути введения | → Модуль 1 |

---

## 3. Разделы vs Блоки

**Разделы (в GSheets) ≠ Блоки (в курсе)!**

| Раздел | Модули | Примечание |
|--------|--------|------------|
| 1 | 1, 2, 3, 4, 5 | ≈ Блок I минус мод.6 |
| 2 | 6, 7, 8, 9 | Конец Блока I + начало Блока II |
| 3 | 10, 11, 12, 14, 15 | Блок II + начало Блока III |
| 4 | 16, 17, 18, 19, 20 | Блок III + Блок IV |
| 5 | 13 | Блок II (Анальгезия) |
| BASICS/basics | [SB] вопросы | → Модуль 1 |

---

## 4. Существующая система авторизации

```
Группы:
  group_code: PHARMA-0126
  group_name: Группа PHARMA-0126
  instructor: Преподаватель Овсянников
  max_cadets: 30

Курсанты:
  cadet_id: CMK48HI0HC44Q | full_name: Игорь | pin_code: 4454
  cadet_id: CMK4A69J300L1 | full_name: Илья  | pin_code: 4904
```

---

## 5. Формат прогресса

```json
{
  "COMPETENCY_ID": {
    "diagnostic": null | score,
    "sections": {"1": null, "2": null, "3": null, "4": null},
    "final": null | score
  }
}
```
29 компетенций в progress_matrix (включая HEMOSTASIS, AIRWAY, EVACUATION и др., которых нет в 20 модулях — они из TCCC).

---

## 6. Выводы для design.md

1. **Маппинг модулей тривиален** — 81/88 уже с числовым модулем, 7 [SB] → Модуль 1
2. **PIN-авторизация существует** — design.md обновлён (cadet_id, не «ввод имени»)
3. **Двойной источник данных** — GSheets (81 вопр) + Supabase (7 вопр) — нужна стратегия объединения на клиенте
4. **Разделы ≠ Блоки** — при группировке UI использовать блоки из course_modules, не разделы из GSheets
5. **Компетенций больше, чем модулей** — 26+ в config vs 20 модулей. Часть компетенций (HEMOSTASIS, AIRWAY, EVACUATION, etc.) относятся к TCCC, не к фармакологии
